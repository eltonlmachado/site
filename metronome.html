<!DOCTYPE html>
<html>
<head>
    <title>Infinite Metronome</title>
    <link data-minify="1" rel="stylesheet" id="vc_plugin_table_style_css-css" href="metronome_files/style_002.css" type="text/css" media="all">
    <link data-minify="1" rel="stylesheet" id="vc_plugin_themes_css-css" href="metronome_files/themes.css" type="text/css" media="all">
    <link data-minify="1" rel="stylesheet" id="js_composer_front-css" href="metronome_files/js_composer.min.css" type="text/css" media="all">
    <link data-minify="1" rel="stylesheet" id="td-theme-css" href="metronome_files/style.css" type="text/css" media="all">
    <link data-minify="1" rel="stylesheet" id="td-theme-child-css" href="metronome_files/style_004.css" type="text/css" media="all">
</head>
<body>
    <div class="td-main-content-wrap td-main-page-wrap td-container-wrap" bis_skin_checked="1">
        <div class="td-container tdc-content-wrap" bis_skin_checked="1">
            <div class="td-pb-row" bis_skin_checked="1">
                <div class="td-pb-span8 td-main-content" role="main" bis_skin_checked="1">
                    <div class="td-ss-main-content" bis_skin_checked="1">
                        <link data-minify="1" rel="stylesheet" href="metronome_files/bootstrap.min.css">
                        <link data-minify="1" rel="stylesheet" href="metronome_files/style_003.css">


                        <!-- Metronome content -->
                        <div class="td-post-header" bis_skin_checked="1">
                            <header class="td-post-title">
                                <h1 class="entry-title">Infinite Metronome</h1>
                            </header>
                        </div>
                        <div class="td-post-content" bis_skin_checked="1">
                            <div class="vc_row wpb_row td-pb-row" bis_skin_checked="1">
                                <div class="wpb_column vc_column_container td-pb-span12" bis_skin_checked="1">
                                    <div class="vc_column-inner " bis_skin_checked="1">
                                        <div class="wpb_wrapper" bis_skin_checked="1">
                                            <div class="wpb_text_column wpb_content_element " style="margin-bottom: -10px;" bis_skin_checked="1">
                                                <div class="wpb_wrapper" bis_skin_checked="1">


                                                    <!-- Metronome controls -->
                                                    <div id="metronome" bis_skin_checked="1">
                                                        <div class="row met-container" bis_skin_checked="1">
                                                            <div class="col-md-4 metronome-col" bis_skin_checked="1">
                                                                <div class="row" bis_skin_checked="1">
                                                                    <button id="play-button" class="center-block">
                                                                        <div id="play-pause-icon" class="play" bis_skin_checked="1"></div>
                                                                    </button>
                                                                    <div class="row beat-box " bis_skin_checked="1">
                                                                        <div class="first-beat center-block" bis_skin_checked="1">
                                                                            <input type="checkbox" id="stressFirst">
                                                                            <label for="stressFirst"> Stress first beat</label><br>
                                                                        </div>
                                                                        <div class="first-beat center-block" bis_skin_checked="1">
                                                                            <input type="checkbox" id="flashColors">
                                                                            <label for="flashColors"> Change button color</label><br>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-8 metronome-col" bis_skin_checked="1">
                                                                <div class="tempo-controls" bis_skin_checked="1">


                                                                    <button class="tempo-change" data-change="-1000">-1k</button>
                                                                    <button class="tempo-change" data-change="-100">-100</button>
                                                                    <button class="tempo-change" data-change="-10">-10</button>
                                                                    <button class="tempo-change" data-change="-1">-1</button>
<div class="tempo-container" bis_skin_checked="1">
    <div id="tempo" bis_skin_checked="1" contenteditable="true" oninput="updateTempo(event)" data-change="">120</div>
    <div class="bpm" bis_skin_checked="1">bpm</div>
</div>
                                                                    <button class="tempo-change" data-change="+1">+1</button>
                                                                    <button class="tempo-change" data-change="+10">+10</button>
                                                                    <button class="tempo-change" data-change="+100">+100</button>
                                                                    <button class="tempo-change" data-change="+1000">+1k</button>
                                                                </div>
                                                                <div class="beat-controls" bis_skin_checked="1">
                                                                    <button class="beat-change" data-change="-1">-</button>
                                                                    <div class="beat-container" bis_skin_checked="1">
                                                                        <div id="beats" bis_skin_checked="1">4</div>
                                                                        <div class="npm" bis_skin_checked="1">notes per<br>measure</div>
                                                                    </div>
                                                                    <button class="beat-change" data-change="+1">+</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- End of Metronome content -->

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <script src="metronome_files/metronome.js"></script>
                        <script src="metronome_files/app.js"></script>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script>
    function updateTempo(event) {
        // Get the tempo element
        var tempoElement = document.getElementById("tempo");
        
        // Get the current cursor position
        var cursorPosition = getCaretPosition(tempoElement);
        
        // Get the updated tempo value
        var updatedTempo = parseInt(tempoElement.textContent);
        
        // Update the tempo displayed
        tempoElement.textContent = updatedTempo;
        
        // Set the cursor position back to its original position
        setCaretPosition(tempoElement, cursorPosition);
        
        // Update the data-change attribute with the updated value
        tempoElement.setAttribute("data-change", updatedTempo);
        
        // Update the metronome sound with the new tempo
        setTempo();
    }

    function getCaretPosition(element) {
        var selection = window.getSelection();
        var range = selection.getRangeAt(0);
        range.setStart(element, 0);
        return range.toString().length;
    }

    function setCaretPosition(element, position) {
        var range = document.createRange();
        var selection = window.getSelection();
        range.setStart(element.childNodes[0], position);
        range.collapse(true);
        selection.removeAllRanges();
        selection.addRange(range);
    }
</script>
</body>
</html>
